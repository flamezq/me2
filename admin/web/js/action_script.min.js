$(document).ready(function(){var formID=$("form").find('input[name="eWin-backend"]').closest("form").attr("id");$(".ew-save-common").attr("onclick","$('#"+formID+"').submit()").attr("href","javascript:void(0)");$("div.date").hover(function(){$(this).children("span").attr("title"," ")});$("body").on("mouseover",'button[data-toggle="dropdown"]',function(){$(this).removeAttr("title"," ").removeAttr("aria-describedby"," ")});if($("body").hasClass("sidebar-collapse")){$(".user-panel").hide()}else{setTimeout(()=>{$(".user-panel").slideDown('slow')},1500)}
$("body").on("click","#offcanvas",function(){if(window.innerWidth<768){if($("body").hasClass("sidebar-open")){}else{$(".user-panel").show()}}else{route("index.php?r=ajax/switch_menu","GET","","Navi-Title");if($("body").hasClass("sidebar-collapse")){$(".user-panel").show()}else{$(".user-panel").hide()}}});$("body").on("change",".language-picker",function(){var selected=$(this).find("option:selected").val();window.location.href=addParameterToURL("language="+selected)})});function addParameterToURL(param){_url=location.href;_url+=(_url.split("?")[1]?"&":"?")+param;return _url}
function route(url,type,data,div){var newUrl="index.php?r="+url;if(~url.indexOf("index.php?r=")){newUrl=url}
$.ajax({url:newUrl,type:type,data:data,async:!1,success:function(getData){$("."+div).hide().html(getData).fadeIn("slow")},error:function(xhr,resp,text){console.log(xhr,resp,text)}})}
function routes(url,type,data,div){var newUrl="index.php?r="+url;if(~url.indexOf("index.php?r=")){newUrl=url}
$(div).fadeOut();$.ajax({url:newUrl,type:type,data:data,async:!0,success:function(getData){$(div).html(getData);setTimeout(function(){$(div).fadeIn("slow")},200)},error:function(xhr,resp,text){console.log(xhr,resp,text)}})}
function number_format(nStr){nStr+="";x=nStr.split(".");x1=x[0];x2=x.length>1?"."+x[1]:"";var rgx=/(\d+)(\d{3})/;while(rgx.test(x1)){x1=x1.replace(rgx,"$1"+","+"$2")}
return x1+x2}
$("body").on("click",'button[data-dismiss="modal"]',function(){$("body").attr("style","overflow:auto; margin-right:0px;")});function getUrlVars($param){var vars=[],hash;var hashes=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var i=0;i<hashes.length;i++){hash=hashes[i].split("=");vars.push(hash[0]);vars[hash[0]]=hash[1]}
return vars[$param]}
function disableSubmit($form){$($form).on("beforeSubmit",function(e){}).on("submit",function(e){e.preventDefault()})}
function toolTip(e){$(e).hover(function(){if($(this).attr("data-tooltip")!=""){$(this).css("cursor","pointer");$(this).append('<div class="ew-tooltip"></div>');$(this).closest("tr").find(".ew-tooltip").html($(this).attr("data-tooltip"));$(this).closest("tr").find(".ew-tooltip").fadeIn("slow")}},function(){$(this).closest("tr").find(".ew-tooltip").fadeOut("fast",function(){$(this).closest("tr").find(".ew-tooltip").remove()})})}
$("body").on("click","div.ew-data-saleorder",function(){var $url=$(this).closest("li").find("a").attr("href");if($url!=null){window.location.href=$url}});function autoRefresh(setTimmer){var timmer=setTimmer;var timer;$(document).on("mousemove",function(e){clearInterval(timer);timer=setInterval(function(){location.reload()},timmer*1000)});$(document).ready(function(){timer=setInterval(function(){location.reload()},timmer*1000)})}
function ActiveUpdateField($Object){var tr=$Object.data.closest("tr");var form=$($Object.form);var $data={ajax:!0,key:tr.attr("data-key"),name:tr.find($Object.data).attr("name"),data:tr.find($Object.data).val()};var action=form.attr("action");var res=[];$.ajax({url:action+"&_pjax=%23p0",type:form.attr("method"),data:$data,dataType:"JSON",success:function(response){res.push(response)},error:function(){alert("Something went wrong")}});return res}
$("body").on("keydown","input.money",function(e){if($.inArray(e.keyCode,[46,8,9,27,13,110,190])!==-1||(e.keyCode===65&&(e.ctrlKey===!0||e.metaKey===!0))||(e.keyCode>=35&&e.keyCode<=40)){var valid=/^\d{0,4}(\.\d{0,2})?$/.test(this.value),val=this.value;if(!valid){this.value=val.substring(0,val.length-1)}
return}
if((e.shiftKey||(e.keyCode<48||e.keyCode>57))&&(e.keyCode<96||e.keyCode>105)){e.preventDefault()}});$("body").on("click","a#change-theme",function(){var theme=$(this).data("id");$.ajax({url:"index.php?r=ajax/change-theme",type:"POST",data:{theme:theme},dataType:"JSON",success:function(response){if(response.status==200){location.reload()}}})});$("body").on("click",".demis-theme-change",function(){$.ajax({url:"index.php?r=ajax/change-theme-demis",type:"GET",data:{demis:"true"},dataType:"JSON",success:function(response){if(response.status==200){location.reload()}}})});if($("body").find('input[type="date"]').length>0){if($('input[type="date"]')[0].type!="date")
$('input[type="date"]').datepicker({dateFormat:"yy-mm-dd"})}
$("body").on("click",".nav-link-expand",function(e){});$('body').on('click','a.set-favorite-menu',function(){let el=$(this);let url=el.attr('data-url');let status=el.attr('data-status');let name=$('title').html();fetch("?r=ajax/set-favorite-menu",{method:"POST",body:JSON.stringify({url:url,status:status,name:name}),headers:{"Content-Type":"application/json","X-CSRF-Token":$('meta[name="csrf-token"]').attr("content")}}).then(res=>res.json()).then(res=>{if(res.status===200){if(res.message==='on'){el.find('i').attr('class','fas fa-star text-yellow');el.attr('data-status','on')}else{el.find('i').attr('class','far fa-star');el.attr('data-status','off')}}}).catch(error=>{console.log(error)})})